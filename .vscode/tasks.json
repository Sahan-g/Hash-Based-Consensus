{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Start Node 1 (aligned 20s before round)",
      "type": "shell",
      "command": "bash",
      "args": [
        "-c",
        "now=$(date +%s%3N); interval=30000; nextRound=$((now - (now % interval) + interval)); target=$((nextRound - 20000)); delay=$((target - now)); if [ $delay -gt 0 ]; then sleep $(echo \"$delay/1000\" | bc -l); fi; ENABLE_SENSOR_SIM=true DB_PATH=./chaindata P2P_PORT=5001 npm run dev"
      ],
      "presentation": {
        "panel": "new"
      }
    },
    {
      "label": "Start Node 2 (aligned 20s before round)",
      "type": "shell",
      "command": "bash",
      "args": [
        "-c",
        "now=$(date +%s%3N); interval=30000; nextRound=$((now - (now % interval) + interval)); target=$((nextRound - 20000)); delay=$((target - now)); if [ $delay -gt 0 ]; then sleep $(echo \"$delay/1000\" | bc -l); fi; ENABLE_SENSOR_SIM=true DB_PATH=./chaindata5002 P2P_PORT=5002 PORT=3002 npm run dev"
      ],
      "presentation": {
        "panel": "new"
      }
    },
    {
      "label": "Start Node 3 (aligned 20s before round)",
      "type": "shell",
      "command": "bash",
      "args": [
        "-c",
        "now=$(date +%s%3N); interval=30000; nextRound=$((now - (now % interval) + interval)); target=$((nextRound - 20000)); delay=$((target - now)); if [ $delay -gt 0 ]; then sleep $(echo \"$delay/1000\" | bc -l); fi; ENABLE_SENSOR_SIM=true DB_PATH=./chaindata5003 P2P_PORT=5003 PORT=3003 npm run dev"
      ],
      "presentation": {
        "panel": "new"
      }
    },
    {
      "label": "Start Node 4 (aligned 7s before round)",
      "type": "shell",
      "command": "bash",
      "args": [
        "-c",
        "now=$(date +%s%3N); interval=30000; nextRound=$((now - (now % interval) + interval)); target=$((nextRound - 7000)); delay=$((target - now)); if [ $delay -gt 0 ]; then sleep $(echo \"$delay/1000\" | bc -l); fi; ENABLE_SENSOR_SIM=true DB_PATH=./chaindata5004 P2P_PORT=5004 PORT=3004 npm run dev"
      ],
      "presentation": {
        "panel": "new"
      }
    },
    {
      "label": "Start All Nodes (aligned)",
      "dependsOrder": "parallel",
      "dependsOn": [
        "Start Node 1 (aligned 20s before round)",
        "Start Node 2 (aligned 20s before round)",
        "Start Node 3 (aligned 20s before round)",
        "Start Node 4 (aligned 7s before round)"
      ]
    }


  ]
}
